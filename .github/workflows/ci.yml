# name: IBridge deploy

# on:
#   push:
#     branches:
#       - master
#   pull_request:
#     branches:
#       - master

# jobs:
#   ci:
#     runs-on: ${{ matrix.os }}

#     strategy:
#       matrix:
#         os: [ubuntu-latest]
#         node: [14]

#     steps:
#       - name: Checkout 🛎
#         uses: actions/checkout@master

#       - name: Setup node env 🏗
#         uses: actions/setup-node@v2.1.5
#         with:
#           node-version: ${{ matrix.node }}
#           check-latest: true

#       - name: Cache node_modules 📦
#         uses: actions/cache@v2.1.4
#         with:
#           path: ~/.npm
#           key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}
#           restore-keys: |
#             ${{ runner.os }}-node-

#       - name: Install dependencies 👨🏻‍💻
#         run: npm ci --prefer-offline --no-audit

#       - name: Run linter 👀
#         run: npm run lint

#       # - name: Deploy to server
#       #   uses: 'appleboy/ssh-action@master'
#       #   with:
#       #     host: '185.121.81.120'
#       #     username: 'root'
#       #     password: ${{secrets.PRODUCTION_SERVER_PASSWORD}}
#       #     port: '22'
#       #     script: |
#       #       cd /var/www/front
#       #       ${{secrets.GIT_PULL}}
#       #       npm install
#       #       npm audit fix
#       #       npm run build
#       #       pm2 delete all
#       #       pm2 start npm --name "ibridge.kz" -- run start
#       #       systemctl restart nginx
